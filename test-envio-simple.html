<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prueba de Env√≠o Simple</title>
</head>
<body>
    <h1>Prueba de Env√≠o del Formulario</h1>
    
    <form id="testForm">
        <input type="text" id="testField" placeholder="Campo de prueba" value="Dato de prueba">
        <button type="submit">Enviar Prueba</button>
    </form>
    
    <div id="result"></div>
    
    <script>
        // Simular la configuraci√≥n de Google Sheets
        function getGoogleSheetsConfig() {
            return {
                APPS_SCRIPT: {
                    WEB_APP_URL: 'https://script.google.com/macros/s/AKfycbxp05T-jRdw_fX2gTBNHVbDcyfmqqUtDjb_-MsRdkvfL8sVpLncQmaBBApvJbzhrP5jGQ/exec'
                }
            };
        }
        
        // Funci√≥n de env√≠o simplificada
        async function submitToGoogleSheets(formData) {
            console.log('üîß Iniciando submitToGoogleSheets...');
            
            const config = getGoogleSheetsConfig();
            console.log('‚úÖ Configuraci√≥n obtenida:', config);
            
            const GOOGLE_APPS_SCRIPT_URL = config.APPS_SCRIPT?.WEB_APP_URL;
            console.log('üîó URL de Google Apps Script:', GOOGLE_APPS_SCRIPT_URL);
            
            try {
                console.log('üì§ Datos a enviar:', formData);
                
                const formDataToSend = new FormData();
                Object.keys(formData).forEach(key => {
                    formDataToSend.append(key, formData[key]);
                    console.log(`üìù Enviando campo: ${key} = ${formData[key]}`);
                });
                
                console.log('üåê Realizando fetch a:', GOOGLE_APPS_SCRIPT_URL);
                
                const response = await fetch(GOOGLE_APPS_SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    body: formDataToSend
                });
                
                console.log('üì° Respuesta del fetch:', response);
                console.log('‚úÖ Datos enviados exitosamente');
                return true;
                
            } catch (error) {
                console.error('‚ùå Error en env√≠o:', error);
                throw error;
            }
        }
        
        // Manejo del formulario
        document.getElementById('testForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = 'üîÑ Enviando...';
            
            try {
                const formData = {
                    test: document.getElementById('testField').value,
                    timestamp: new Date().toISOString()
                };
                
                console.log('üöÄ Iniciando env√≠o...');
                const result = await submitToGoogleSheets(formData);
                console.log('‚úÖ Resultado:', result);
                
                resultDiv.innerHTML = '‚úÖ Env√≠o exitoso!';
                
            } catch (error) {
                resultDiv.innerHTML = '‚ùå Error: ' + error.message;
                console.error('‚ùå Error:', error);
            }
        });
    </script>
</body>
</html>
