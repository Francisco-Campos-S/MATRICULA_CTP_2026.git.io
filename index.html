<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title id="pageTitle">Matr√≠cula 2026 - CTP Sabalito</title>
    <link rel="icon" type="image/png" href="logo.png">
    <meta name="description" content="Formulario web para la matr√≠cula estudiantil del Colegio T√©cnico Profesional Agropecuario de Sabalito">
    <meta name="author" content="CTP Agropecuario de Sabalito">
    
    <!-- Meta tags para controlar la impresi√≥n -->
    <meta name="robots" content="noindex, nofollow">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="print-title" content="">
    <meta name="print-url" content="">
    
    <!-- CSS -->
    <link rel="stylesheet" href="assets/css/styles-optimized.css">
    
    <!-- JS -->
    <script>
        // Establecer la fecha actual inmediatamente cuando se carga el script
        window.onload = function() {
            console.log('üöÄ Window loaded - estableciendo fecha...');
            if (typeof establecerFechaActual === 'function') {
                establecerFechaActual();
            } else {
                console.warn('‚ö†Ô∏è La funci√≥n establecerFechaActual no est√° disponible todav√≠a');
                // Intentar de nuevo despu√©s de un breve retraso
                setTimeout(function() {
                    if (typeof establecerFechaActual === 'function') {
                        establecerFechaActual();
                    }
                }, 500);
            }
        };
    </script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <div class="school-logo">
                    <img src="logo.png" alt="Logo CTP Sabalito" class="logo">
                </div>
            </div>
            <div class="header-center">
                <div class="school-title">
                    <h1>Colegio T√©cnico Profesional Agropecuario de Sabalito</h1>
                    <h2>Sistema de Matr√≠cula Estudiantil 2026</h2>
                </div>
            </div>
        </header>



        <!-- Form -->
        <form id="matriculaForm" class="matricula-form" action="#" method="post">
            <!-- Print Header (solo visible al imprimir) -->
            <div class="print-header" style="display: none;">
                <div class="header-image">
                    <img src="encabezado.png" alt="Encabezado MEP" class="encabezado-img">
                </div>
                <div class="main-title">BOLETA MATR√çCULA 2026</div>
            </div>

            <!-- Informaci√≥n General de Matr√≠cula -->
            <div class="form-section">
                <div class="section-header">
                    <h2>üìã Informaci√≥n General de Matr√≠cula</h2>
                </div>
                
                <!-- T√≠tulo de secci√≥n para impresi√≥n -->
                <div class="print-section-title" style="display: none;">INFORMACI√ìN GENERAL DE MATR√çCULA</div>
                
                <!-- Informaci√≥n para impresi√≥n -->
                <div class="print-info-general" style="display: none;">
                    <div class="print-info-row">
                        <span class="print-label">Tipo de Matr√≠cula:</span>
                        <span class="print-value" id="print-tipo-matricula"></span>
                    </div>
                    <div class="print-info-row">
                        <span class="print-label">Nivel:</span>
                        <span class="print-value" id="print-nivel"></span>
                    </div>
                    <div class="print-info-row">
                        <span class="print-label">Especialidad:</span>
                        <span class="print-value" id="print-especialidad"></span>
                    </div>
                    <div class="print-info-row">
                        <span class="print-label">Secci√≥n:</span>
                        <span class="print-value" id="print-seccion"></span>
                    </div>
                    <div class="print-info-row">
                        <span class="print-label">Ruta de Transporte:</span>
                        <span class="print-value" id="print-ruta-transporte"></span>
                    </div>
                </div>
                
                <!-- Contenedor horizontal para consulta, tipo de matr√≠cula y nivel/especialidad/secci√≥n -->
                <div class="consulta-tipo-container">
                    <!-- Secci√≥n de consulta -->
                    <div class="consulta-section">
                        <div class="consulta-header">
                            <h3>üîç Consultar Estudiante Existente</h3>
                        </div>
                        <div class="consulta-subtitle">
                            Ingrese el n√∫mero de c√©dula del estudiante
                        </div>
                        <div class="consulta-form">
                            <div class="input-button-container">
                                <input type="text" id="cedulaConsulta" placeholder="N√∫mero de c√©dula" required tabindex="1">
                                <button type="button" class="btn-consulta" onclick="consultarEstudiante()" tabindex="2">
                                    üîç Buscar
                                </button>
                            </div>
                        </div>
                        <div id="mensajeConsulta" class="mensaje-consulta"></div>
                    </div>
                    
                    <!-- Secci√≥n de tipo de matr√≠cula -->
                    <div class="tipo-matricula-section">
                        <div class="tipo-matricula-header">
                            <h3>üéØ Tipo de Matr√≠cula</h3>
                        </div>
                        <div class="tipo-matricula-subtitle">Seleccione el tipo de matr√≠cula</div>
                        <div class="tipo-matricula-options">
                            <div class="tipo-option">
                                <input type="radio" id="regular" name="tipoMatricula" value="regular" required tabindex="3">
                                <label for="regular" class="tipo-label">
                                    <span class="tipo-icon">üè´</span>
                                    <span class="tipo-text">Regular CTP 2026</span>
                                </label>
                            </div>
                            <div class="tipo-option">
                                <input type="radio" id="planNacional" name="tipoMatricula" value="planNacional" required tabindex="4">
                                <label for="planNacional" class="tipo-label">
                                    <span class="tipo-icon">üá®üá∑</span>
                                    <span class="tipo-text">Plan Nacional 2026</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Secci√≥n de nivel, especialidad y secci√≥n -->
                    <div class="nivel-especialidad-section">
                        <div class="nivel-especialidad-header">
                            <h3>üìö Nivel y Especialidad</h3>
                        </div>
                        <div class="nivel-especialidad-subtitle">Seleccione el nivel y especialidad</div>
                        <div class="nivel-especialidad-fields">
                            <div class="form-group">
                                <label for="nivel">Nivel:</label>
                                <select id="nivel" name="nivel" required tabindex="5">
                                    <option value="">Seleccione un nivel</option>
                                    <option value="S√©timo">S√©timo</option>
                                    <option value="Octavo">Octavo</option>
                                    <option value="Noveno">Noveno</option>
                                    <option value="D√©cimo">D√©cimo</option>
                                    <option value="Und√©cimo">Und√©cimo</option>
                                    <option value="Duod√©cimo">Duod√©cimo</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="especialidad">Especialidad:</label>
                                <select id="especialidad" name="especialidad" required tabindex="6">
                                    <option value="">Seleccione una especialidad</option>
                                    <!-- Las opciones se generar√°n din√°micamente con JavaScript -->
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="seccion">Secci√≥n:</label>
                                <select id="seccion" name="seccion" required tabindex="7">
                                    <option value="">Seleccione una secci√≥n</option>
                                    <!-- Las opciones se generar√°n din√°micamente con JavaScript -->
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Student Data -->
            <div class="form-section">
                <div class="section-header">
                    <h2>üë§ Datos del Estudiante</h2>
                </div>
                
                <!-- T√≠tulo de secci√≥n para impresi√≥n -->
                <div class="print-section-title" style="display: none;">DATOS DEL ESTUDIANTE</div>
                
                <div class="form-row five-columns">
                    <div class="form-column">
                        <div class="form-group">
                            <label for="primerApellido">Primer apellido:</label>
                            <input type="text" id="primerApellido" name="primerApellido" required tabindex="8">
                        </div>
                        <div class="form-group">
                            <label for="nacionalidad">NACIONALIDAD:</label>
                            <select id="nacionalidad" name="nacionalidad" onchange="mostrarNacionalidadOtro()" tabindex="13">
                                <option value="">Seleccione una nacionalidad</option>
                                <option value="Costarricense">Costarricense</option>
                                <option value="Paname√±a">Paname√±a</option>
                                <option value="Nicarag√ºense">Nicarag√ºense</option>
                                <option value="Venezolana">Venezolana</option>
                                <option value="Otro">Otro</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="discapacidad">Discapacidad:</label>
                            <select id="discapacidad" name="discapacidad" tabindex="19">
                                <option value="">Seleccione...</option>
                                <option value="Sin discapacidad">Sin discapacidad</option>
                                <option value="Baja Visi√≥n">Baja Visi√≥n</option>
                                <option value="Ceguera">Ceguera</option>
                                <option value="Discapacidad Intelectual (Retraso Mental)">Discapacidad Intelectual (Retraso Mental)</option>
                                <option value="Discapacidad motora">Discapacidad motora</option>
                                <option value="Discapacidad M√∫ltiple (Multidiscapacidad o Retos M√∫ltiples)">Discapacidad M√∫ltiple (Multidiscapacidad o Retos M√∫ltiples)</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-column">
                        <div class="form-group">
                            <label for="segundoApellido">Segundo apellido:</label>
                            <input type="text" id="segundoApellido" name="segundoApellido" tabindex="9">
                        </div>
                        <div class="form-group">
                            <label for="adecuacion">Adecuaci√≥n:</label>
                            <select id="adecuacion" name="adecuacion" tabindex="15">
                                <option value="">Seleccione...</option>
                                <option value="Sin adecuaci√≥n">Sin adecuaci√≥n</option>
                                <option value="Significativa">Significativa</option>
                                <option value="No significativa">No significativa</option>
                                <option value="Acceso">Acceso</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="enfermedad">Enfermedad:</label>
                            <input type="text" id="enfermedad" name="enfermedad" placeholder="Describa la enfermedad o condici√≥n m√©dica (dejar vac√≠o si no aplica)" tabindex="20">
                        </div>
                    </div>
                    <div class="form-column">
                        <div class="form-group">
                            <label for="nombreEstudiante">Nombre:</label>
                            <input type="text" id="nombreEstudiante" name="nombreEstudiante" required tabindex="10">
                        </div>
                        <div class="form-group">
                            <label for="tipoIdentificacion">TIPO DE IDENTIFICACI√ìN:</label>
                            <select id="tipoIdentificacion" name="tipoIdentificacion" onchange="mostrarTipoIdentificacionOtro()" required tabindex="16">
                                <option value="">Seleccione...</option>
                                <option value="C√©dula">C√©dula</option>
                                <option value="YR">YR</option>
                                <option value="DIMEX">DIMEX</option>
                                <option value="Otro">Otro</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="cedulaEstudiante">N¬∞ c√©dula:</label>
                            <input type="text" id="cedulaEstudiante" name="cedulaEstudiante" required tabindex="21">
                        </div>
                    </div>
                    <div class="form-column">
                        <div class="form-group">
                            <label for="fechaNacimiento">Fecha nacimiento:</label>
                            <input type="date" id="fechaNacimiento" name="fechaNacimiento" onchange="actualizarEdad()" required tabindex="11">
                        </div>
                        <div class="form-group">
                            <label for="telefonoEstudiante">N¬∫ tel√©fono:</label>
                            <input type="tel" id="telefonoEstudiante" name="telefonoEstudiante" tabindex="17">
                        </div>
                        <div class="form-group">
                            <label for="edadCalculada">Edad al 01 de febrero de 2026:</label>
                            <input type="text" id="edadCalculada" name="edadCalculada" readonly tabindex="22" style="background-color: #f5f5f5; color: #666;">
                        </div>
                    </div>
                    <div class="form-column">
                        <div class="form-group">
                            <label for="repitente">¬øEs repitente?</label>
                            <select id="repitente" name="repitente" tabindex="12">
                                <option value="">Seleccione...</option>
                                <option value="S√≠">S√≠</option>
                                <option value="No">No</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="rutaTransporte">Ruta de transporte:</label>
                            <select id="rutaTransporte" name="rutaTransporte" required tabindex="18">
                                <option value="">Seleccione una ruta</option>
                                <!-- Las opciones se generar√°n din√°micamente con JavaScript -->
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Mother/Guardian Data -->
            <div class="form-section">
                <div class="section-header">
                    <h2>üë© Datos de la Madre o Encargada</h2>
                </div>
                
                <!-- T√≠tulo de secci√≥n para impresi√≥n -->
                <div class="print-section-title" style="display: none;">DATOS DE LA MADRE O ENCARGADA</div>
                
                <div class="form-row three-columns">
                    <div class="form-column">
                        <div class="form-group">
                            <label for="nombreMadre">Nombre:</label>
                            <input type="text" id="nombreMadre" name="nombreMadre" required tabindex="29">
                        </div>
                        <div class="form-group">
                            <label for="cedulaMadre">N¬∞ de C√©dula:</label>
                            <input type="text" id="cedulaMadre" name="cedulaMadre" required tabindex="32">
                        </div>
                    </div>
                    <div class="form-column">
                        <div class="form-group">
                            <label for="telefonoMadre">N¬∫ tel√©fono:</label>
                            <input type="tel" id="telefonoMadre" name="telefonoMadre" required tabindex="30">
                        </div>
                        <div class="form-group">
                            <label for="parentescoMadre">Parentesco:</label>
                            <input type="text" id="parentescoMadre" name="parentescoMadre" tabindex="33">
                        </div>
                    </div>
                    <div class="form-column">
                        <div class="form-group">
                            <label for="viveConEstudianteMadre">Vive con estudiante:</label>
                            <select id="viveConEstudianteMadre" name="viveConEstudianteMadre" tabindex="31">
                                <option value="">Seleccione...</option>
                                <option value="S√≠">S√≠</option>
                                <option value="No">No</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="direccionMadre">Direcci√≥n exacta:</label>
                            <textarea id="direccionMadre" name="direccionMadre" rows="1" required tabindex="34"></textarea>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Father/Guardian Data -->
            <div class="form-section">
                <div class="section-header">
                    <h2>üë® Datos del Padre o Encargado</h2>
                </div>
                
                <!-- T√≠tulo de secci√≥n para impresi√≥n -->
                <div class="print-section-title" style="display: none;">DATOS DEL PADRE O ENCARGADO</div>
                
                <div class="form-row three-columns">
                    <div class="form-column">
                        <div class="form-group">
                            <label for="nombrePadre">Nombre:</label>
                            <input type="text" id="nombrePadre" name="nombrePadre" tabindex="35">
                        </div>
                        <div class="form-group">
                            <label for="cedulaPadre">N¬∞ de C√©dula:</label>
                            <input type="text" id="cedulaPadre" name="cedulaPadre" tabindex="38">
                        </div>
                    </div>
                    <div class="form-column">
                        <div class="form-group">
                            <label for="telefonoPadre">N¬∫ tel√©fono:</label>
                            <input type="tel" id="telefonoPadre" name="telefonoPadre" tabindex="36">
                        </div>
                        <div class="form-group">
                            <label for="parentescoPadre">Parentesco:</label>
                            <input type="text" id="parentescoPadre" name="parentescoPadre" tabindex="39">
                        </div>
                    </div>
                    <div class="form-column">
                        <div class="form-group">
                            <label for="viveConEstudiantePadre">Vive con estudiante:</label>
                            <select id="viveConEstudiantePadre" name="viveConEstudiantePadre" tabindex="37">
                                <option value="">Seleccione...</option>
                                <option value="S√≠">S√≠</option>
                                <option value="No">No</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="direccionPadre">Direcci√≥n:</label>
                            <textarea id="direccionPadre" name="direccionPadre" rows="1" tabindex="40"></textarea>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Declaration and Signatures -->
            <div class="form-section">
                <div class="section-header">
                    <h2>‚úçÔ∏è Declaraci√≥n y Firmas</h2>
                </div>
                
                <!-- T√≠tulo de secci√≥n para impresi√≥n -->
                <div class="print-section-title" style="display: none;">DECLARACI√ìN Y FIRMAS</div>
                
                <div class="declaration">
                    <p><strong>Declaro que la informaci√≥n proporcionada es ver√≠dica y completa.</strong></p>
                </div>
                
                <!-- Espacio vac√≠o donde estaba el contenedor anterior -->
                <div style="display: none;"></div>
                
                <!-- Observaciones y fecha para impresi√≥n (antes del footer) -->
                <div class="print-observaciones-fecha" style="display: none;">
                    <div class="print-observaciones-container">
                        <div class="print-observaciones-grupo">
                            <span class="print-observaciones-label">Observaciones Adicionales:</span>
                            <div class="print-observaciones-linea"></div>
                        </div>
                        <div class="print-fecha-grupo">
                            <span class="print-fecha-label">Fecha de Matr√≠cula:</span>
                            <span class="print-fecha-valor" id="print-fecha-valor"></span>
                        </div>
                    </div>
                </div>
                
                <!-- L√≠neas de firma para impresi√≥n -->
                <div class="print-firmas" style="display: none;">
                    <div class="firma-container">
                        <div class="firma-lado-izquierdo">
                            <div class="firma-linea">
                                <span class="firma-label">FIRMA DE LA ENCARGADA:</span>
                                <div class="firma-linea-blanca"></div>
                            </div>
                        </div>
                        <div class="firma-lado-derecho">
                            <div class="firma-linea">
                                <span class="firma-label">FIRMA DEL ENCARGADO:</span>
                                <div class="firma-linea-blanca"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Observaciones y fecha en el formulario -->
                <div class="observaciones-fecha-container" style="margin-bottom: 30px; margin-top: 30px;">
                    <div class="observaciones-grupo">
                        <label for="observaciones">Observaciones Adicionales:</label>
                        <textarea id="observaciones" name="observaciones" rows="3" placeholder="Informaci√≥n adicional, comentarios o notas importantes sobre la matr√≠cula del estudiante" tabindex="44" style="min-height: 80px;"></textarea>
                    </div>
                    <div class="fecha-grupo">
                        <label for="fecha-matricula" style="text-align: center; display: block;">Fecha de Matr√≠cula:</label>
                        <input type="date" id="fecha-matricula" name="fecha-matricula" tabindex="45" style="margin: 0 auto; display: block; width: 80%;">
                    </div>
                </div>
                
            </div>

            <!-- Botones de Acci√≥n -->
            <div class="form-actions">
                <button type="button" class="btn btn-test" onclick="cargarDatosPrueba()" tabindex="45">
                    <span class="btn-icon">üß™</span>
                    <span class="btn-text">Cargar Datos de Prueba</span>
                </button>
                
                <button type="button" id="btnSubmit" class="btn btn-submit" onclick="enviarFormulario()" tabindex="46">
                    <span class="btn-icon">üì§</span>
                    <span class="btn-text">Enviar Formulario</span>
                </button>
                
                <button type="button" id="btnReset" class="btn btn-reset" onclick="limpiarFormulario()" tabindex="47">
                    <span class="btn-icon">üßπ</span>
                    <span class="btn-text">Limpiar Formulario</span>
                </button>
                
                <button type="button" id="btnPrint" class="btn btn-print" onclick="imprimirFormulario()" tabindex="48">
                    <span class="btn-icon">üñ®Ô∏è</span>
                    <span class="btn-text">Imprimir</span>
                </button>
            </div>
            
            <!-- Informaci√≥n sobre la impresi√≥n -->
            <div class="print-info" style="display: none;">
                <p><strong>üí° Nota:</strong> Al imprimir, el archivo se guardar√° autom√°ticamente con el nombre del estudiante, nivel, secci√≥n y a√±o.</p>
                <p><strong>Ejemplo:</strong> Boleta_Matricula_Apellido_Nivel_Seccion_2026.pdf</p>
            </div>
            <!-- Footer solo visible en impresi√≥n -->
            <div class="footer-permanent">
                <p style="font-weight: bold; color: black; margin: 2px 0; font-size: 10px; text-align: center; font-family: Arial, sans-serif;">Puntarenas, Coto Brus, 600 metros sureste de la tostadora de Caf√© Rio Brus, camino a Rio Sereno.</p>
                <p style="font-weight: bold; color: black; margin: 2px 0; font-size: 10px; text-align: center; font-family: Arial, sans-serif;">Tel√©fono (506) 2784-0616/WhatsApp 69914536. Email: Ctp.desabalito@mep.go</p>
            </div>
        </form>

        <!-- Success Message -->
        <div id="successMessage" class="success-message" style="display: none;">
            <h3>¬°Matr√≠cula Enviada Exitosamente!</h3>
            <p>Los datos han sido guardados en Google Sheets.</p>
        </div>

        <!-- Loading Spinner -->
        <div id="loadingSpinner" class="loading-spinner" style="display: none;">
            <div class="spinner"></div>
            <p>Enviando datos...</p>
        </div>


    </div>



    <!-- JavaScript -->
    <script src="assets/js/script.js"></script>
    <script src="assets/js/google-sheets-config.js"></script>
</body>
</html>

  