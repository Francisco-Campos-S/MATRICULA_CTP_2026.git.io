/* Estilos de impresión unificados */
@media print {
    /* Estilos mejorados para el campo de discapacidad */
    #discapacidadOtro.print-visible,
    input[name="discapacidad"],
    #discapacidad,
    select[name="discapacidad"] {
        display: block !important;
        visibility: visible !important;
        width: 100% !important;
        min-width: unset !important;
        border: none !important;
        border-bottom: 1px solid #444 !important;
        padding: 1px 2px !important;
        font-size: 9pt !important;
        height: 16px !important;
        min-height: 16px !important;
        max-height: 16px !important;
        background: #fff !important;
        color: #000 !important;
        margin: 0 !important;
    }

    /* Ocultar línea vacía cuando no hay selección */
    #discapacidad:empty,
    select[name="discapacidad"]:empty,
    input[name="discapacidad"]:empty,
    #discapacidadOtro:empty {
        border-bottom: none !important;
    }

    /* Mostrar "Sin discapacidad" cuando está vacío */
    #discapacidad:empty::before,
    select[name="discapacidad"]:empty::before,
    input[name="discapacidad"]:empty::before {
        content: "Sin discapacidad" !important;
        color: #000 !important;
        font-style: normal !important;
        font-size: 9pt !important;
    }

    /* Contenedores de campos especiales */
    #discapacidadInputContainer,
    .cedula-container,
    .ruta-transporte-container {
        display: block !important;
        width: 100% !important;
        position: relative !important;
        margin: 0 !important;
        padding: 0 !important;
    }

    /* Ajuste de contenedores de formulario para alineación */
    .form-group {
        margin: 0 0 3px 0 !important;
        padding: 0 !important;
        position: relative !important;
        display: flex !important;
        flex-direction: column !important;
        justify-content: flex-end !important;
        min-height: 28px !important;
    }

    /* Estilos específicos para el select de discapacidad */
    select[name="discapacidad"],
    #discapacidad {
        -webkit-appearance: none !important;
        -moz-appearance: none !important;
        appearance: none !important;
        background: linear-gradient(to bottom, #fff 95%, #f9f9f9 100%) !important;
    }

    /* Asegurar que el valor "Sin discapacidad" se muestre correctamente */
    select[name="discapacidad"] option[value="Sin discapacidad"],
    #discapacidad option[value="Sin discapacidad"] {
        color: #000 !important;
        background: #fff !important;
    }

    /* Cuando se selecciona 'Otro', ocultar el select y mostrar solo el input */
    #discapacidad[value='Otro'] {
        display: none !important;
    }

    #discapacidad[value='Otro'] + #discapacidadOtro {
        display: block !important;
    }

    /* Configuración de página optimizada */
    @page {
        size: A4 portrait;
        margin: 0.7cm 0.5cm 0.7cm 0.9cm !important;
        marks: none;
    }

    @media print {
        @page {
            size: A4 !important;
            margin: 0.7cm 0.5cm 0.7cm 0.9cm !important;
        }
        
        @page :blank {
            display: none !important;
        }
        
        html {
            height: auto !important;
            overflow: hidden !important;
        }
        
        body {
            position: relative !important;
            height: auto !important;
            overflow: hidden !important;
        }
        
        .container:last-child {
            page-break-after: avoid !important;
        }
        
        .matricula-form:last-child {
            page-break-after: avoid !important;
        }
        
        .footer-permanent:after {
            display: none !important;
            content: none !important;
        }
    }

    /* Forzar una sola página en Chrome */
    @media print {
        html {
            height: 100% !important;
        }
        body {
            height: 100% !important;
            position: relative !important;
        }
        .container {
            min-height: 0 !important;
            max-height: 100% !important;
        }
        .matricula-form {
            height: auto !important;
            max-height: 100% !important;
        }
    }

    /* Estilos generales */
    html, body {
        width: 100% !important;
        height: auto !important;
        margin: 0 !important;
        padding: 0 !important;
        background: white !important;
        font-family: Arial, sans-serif !important;
        font-size: 9pt !important;
        line-height: 1.15 !important;
        color: #000 !important;
        -webkit-text-size-adjust: 100% !important;
        position: relative !important;
    }

    /* Ajustes específicos para Chrome */
    @media screen and (-webkit-min-device-pixel-ratio:0) {
        @page {
            margin: 1cm !important;
            size: A4 !important;
        }
        
        html {
            zoom: 0.9 !important;
        }

        .matricula-form {
            zoom: 1 !important;
            position: relative !important;
            overflow: visible !important;
        }

        .form-section {
            margin: 8px 0 !important;
            page-break-inside: avoid !important;
            position: relative !important;
            break-inside: avoid !important;
        }

        .form-row {
            break-inside: avoid !important;
            page-break-inside: avoid !important;
            position: relative !important;
        }

        .form-group {
            break-inside: avoid !important;
            page-break-inside: avoid !important;
            position: relative !important;
        }
    }

    /* Ajuste específico para Chrome */
    @media screen and (-webkit-min-device-pixel-ratio:0) {
        @media print {
            body {
                margin: 0 !important;
                padding: 0 !important;
            }
            .form-section {
                margin-bottom: 10px !important;
                page-break-inside: avoid !important;
                position: relative !important;
                clear: both !important;
            }
            .form-group {
                position: relative !important;
                z-index: 1 !important;
            }
            input, select, textarea {
                position: relative !important;
                z-index: 2 !important;
            }
        }
    }
    
    /* Ocultar elementos no necesarios */
    header, .consulta-section, .form-actions, button, .btn,
    .mensaje-consulta, footer, .print-info, .app-footer,
    .print-section-title, #loadingSpinner, #successMessage {
        display: none !important;
    }
    
    /* Estructura del formulario */
    .container, .matricula-form {
        width: 100% !important;
        max-width: 100% !important;
        margin: 0 !important;
        padding: 0 !important;
        overflow: visible !important;
        height: auto !important;
        display: block !important;
        background: white !important;
        border: none !important;
        box-shadow: none !important;
        page-break-after: avoid !important;
        page-break-before: avoid !important;
    }
    
    /* Ajustes específicos para Chrome para evitar página en blanco */
    @media screen and (-webkit-min-device-pixel-ratio:0) {
        @media print {
            .container::after {
                content: none !important;
            }
            
            body::after {
                content: none !important;
            }
            
            html {
                height: auto !important;
            }
        }
    }
    
    /* Título de la boleta - eliminado */
    .matricula-form::before {
        content: none !important;
    }
    
    /* Estilos para el encabezado de impresión */
    .print-header {
        display: none;
    }

    @media print {
        .print-header {
            display: block !important;
            margin-bottom: 20px !important;
            text-align: center !important;
        }

        .main-title {
            font-size: 18pt !important;
            font-weight: bold !important;
            margin: 15px 0 !important;
            text-align: center !important;
            font-family: Arial, sans-serif !important;
        }

        /* Ocultar la información duplicada */
        .tipo-matricula-section,
        .nivel-especialidad-section,
        [data-tipo-matricula],
        [data-nivel],
        [data-especialidad],
        [data-seccion],
        [data-ruta],
        .print-info-general,
        .print-info-box,
        .print-info-row {
            display: none !important;
        }

        /* Ocultar solo el primer encabezado redundante */
        .form-section:first-of-type .section-header {
            display: none !important;
        }
        
        /* Forzar solo blanco y negro en impresión */
        * {
            background: white !important;
            background-color: white !important;
            color: black !important;
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
        }

        /* Mostrar encabezados de sección en impresión sin emoticonos y sin colores */
        .section-header {
            display: block !important;
            background: white !important;
            background-color: white !important;
            color: black !important;
            padding: 3px 5px !important;
            margin: 0 0 5px 0 !important;
            border: 2px solid black !important;
            page-break-after: avoid !important;
        }
        
        .section-header h2 {
            background: white !important;
            background-color: white !important;
            color: black !important;
            margin: 0 !important;
            padding: 2px !important;
            font-size: 11pt !important;
            text-align: center !important;
            font-weight: bold !important;
            font-family: Arial, sans-serif !important;
        }

        /* Asegurar que todos los encabezados sean visibles */
        .form-section .section-header {
            display: block !important;
            visibility: visible !important;
        }

        /* Ocultar texto original y reemplazar con texto sin emoticonos */
        .section-header h2 {
            text-indent: -9999px !important;
            overflow: hidden !important;
            position: relative !important;
        }
        
        .section-header h2::after {
            text-indent: 0 !important;
            position: absolute !important;
            left: 0 !important;
            top: 0 !important;
            width: 100% !important;
            text-align: center !important;
            font-size: 11pt !important;
            font-weight: bold !important;
            color: black !important;
        }
        
        /* Mapeo corregido - intercambiando secciones 1 y 2, eliminando primer encabezado */
        
        /* Eliminar completamente el primer encabezado */
        .form-section:nth-of-type(1) .section-header {
            display: none !important;
        }
        
        /* Sección 2: Ocultar este encabezado también */
        .form-section:nth-of-type(2) .section-header {
            display: none !important;
        }

        /* Sección 3: Datos del Estudiante */
        .form-section:nth-of-type(3) .section-header h2::after {
            content: "DATOS DEL ESTUDIANTE" !important;
        }

        /* Sección 4: Datos de la Madre o Encargada */
        .form-section:nth-of-type(4) .section-header h2::after {
            content: "DATOS DE LA MADRE O ENCARGADA" !important;
        }

        /* Sección 5: Datos del Padre o Encargado */
        .form-section:nth-of-type(5) .section-header h2::after {
            content: "DATOS DEL PADRE O ENCARGADO" !important;
        }

        /* Sección 6: Declaración y Firmas */
        .form-section:nth-of-type(6) .section-header h2::after {
            content: "DECLARACIÓN Y FIRMAS" !important;
        }

        /* Ocultar elementos duplicados */
        .form-section .print-info-general,
        .form-section .print-info-box,
        .section-header,
        .print-section-title {
            display: none !important;
        }
    }

    @media print {
        .consulta-section,
        .tipo-matricula-options,
        .nivel-especialidad-fields {
            display: none !important;
        }

        .print-info-general {
            page-break-inside: avoid !important;
        }
    }
    
    /* Secciones del formulario - más compactas y optimizadas */
    .form-section {
        display: block !important;
        margin-bottom: 4px !important;
        border: 1.5px solid #000 !important;
        box-shadow: 0 0 0 0.5px rgba(0,0,0,0.1) !important;
        border-radius: 2px !important;
        page-break-inside: avoid !important;
        width: 100% !important;
        clear: both !important;
        position: relative !important;
        overflow: visible !important;
        padding: 3px 4px !important;
    }

    /* Ajustes específicos para Chrome */
    @media screen and (-webkit-min-device-pixel-ratio:0) {
        .form-section {
            margin: 0 0 8px 0 !important;
            padding: 4px !important;
        }
        .form-row {
            position: relative !important;
            z-index: 1 !important;
        }
    }
    
    /* Encabezados de sección - más compactos y profesionales */
    .section-header {
        background: white !important;
        background-color: white !important;
        color: black !important;
        padding: 2px 4px !important;
        margin: 0 !important;
        border-bottom: 2px solid black !important;
        page-break-after: avoid !important;
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
    }
    
    .section-header h2 {
        background: white !important;
        background-color: white !important;
        color: black !important;
        margin: 0 !important;
        padding: 1px !important;
        font-size: 10.5pt !important;
        text-align: center !important;
        font-weight: bold !important;
        font-family: Arial, sans-serif !important;
        letter-spacing: 0.6px !important;
        text-shadow: 0 0 0.5px rgba(0,0,0,0.1) !important;
    }
    
    /* Filas y columnas - optimizadas y compactas */
    .form-row {
        display: flex !important;
        flex-wrap: wrap !important;
        gap: 2px !important;
        padding: 2px 3px !important;
        page-break-inside: avoid !important;
        margin: 0 !important;
    }
    
    .form-row.five-columns .form-column { width: 19.6% !important; flex: 1 1 19.6% !important; }
    .form-row.four-columns .form-column { width: 24.5% !important; flex: 1 1 24.5% !important; }
    .form-row.three-columns .form-column { width: 32.6% !important; flex: 1 1 32.6% !important; }
    .form-row.two-columns .form-column { width: 49.25% !important; flex: 1 1 49.25% !important; }
    
    /* Ajuste específico para secciones de madre y padre - nombre más grande */
    .form-section:nth-of-type(4) .form-row.three-columns .form-column:nth-child(1) { width: 55% !important; flex: 1 1 55% !important; }
    .form-section:nth-of-type(4) .form-row.three-columns .form-column:nth-child(2) { width: 20% !important; flex: 1 1 20% !important; }
    .form-section:nth-of-type(4) .form-row.three-columns .form-column:nth-child(3) { width: 23% !important; flex: 1 1 23% !important; }
    
    .form-section:nth-of-type(5) .form-row.three-columns .form-column:nth-child(1) { width: 55% !important; flex: 1 1 55% !important; }
    .form-section:nth-of-type(5) .form-row.three-columns .form-column:nth-child(2) { width: 20% !important; flex: 1 1 20% !important; }
    .form-section:nth-of-type(5) .form-row.three-columns .form-column:nth-child(3) { width: 23% !important; flex: 1 1 23% !important; }
    
    /* Columnas */
    .form-column {
        padding: 2px !important;
        margin: 0 !important;
    }
    
    /* Grupos de formulario - más compactos */
    .form-group {
        margin-bottom: 3px !important;
        page-break-inside: avoid !important;
    }
    
    /* Etiquetas - más pequeñas y profesionales */
    .form-group label {
        display: block !important;
        font-weight: 600 !important;
        font-size: 8pt !important;
        margin-bottom: 0.5px !important;
        color: #222 !important;
        text-transform: uppercase !important;
        letter-spacing: 0.4px !important;
        text-shadow: 0 0 0.2px rgba(0,0,0,0.1) !important;
        position: relative !important;
        padding-left: 1px !important;
    }
    
    /* Cambiar label de "TIPO DE IDENTIFICACIÓN" a "Identificación" en impresión */
    label[for="tipoIdentificacion"] {
        font-size: 0 !important;
    }
    label[for="tipoIdentificacion"]::before {
        content: "Identificación:" !important;
        font-size: 9pt !important;
        font-weight: bold !important;
        display: block !important;
    }
    
    /* Campos de entrada - línea inferior profesional */
    .form-group input,
    .form-group select,
    .form-group textarea {
        width: 100% !important;
        border: none !important;
        border-bottom: 1px solid #444 !important;
        padding: 1px !important;
        font-size: 9pt !important;
        height: 16px !important;
        min-height: 16px !important;
        max-height: 16px !important;
        background: linear-gradient(to bottom, #fff 95%, #f9f9f9 100%) !important;
        color: #000 !important;
        font-weight: normal !important;
        white-space: nowrap !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
        -webkit-appearance: none !important;
        -moz-appearance: none !important;
        appearance: none !important;
        margin: 0 !important;
        display: block !important;
        position: relative !important;
    }

    /* Reglas específicas para campos de teléfono */
    .form-group input[type="tel"],
    .form-group input[name*="telefono"],
    .form-group input[name*="Telefono"],
    .form-group input[id*="telefono"],
    .form-group input[id*="Telefono"],
    .form-group input[placeholder*="telefono"],
    .form-group input[placeholder*="Teléfono"] {
        background: #fff !important;
        background-color: #fff !important;
        color: #000 !important;
        -webkit-text-fill-color: #000 !important;
        text-decoration: none !important;
        -webkit-tap-highlight-color: transparent !important;
    }

    /* Eliminar cualquier estilo de enlace en números de teléfono */
    .form-group input[type="tel"],
    .form-group input[name*="telefono"] {
        pointer-events: none !important;
        cursor: default !important;
        text-decoration: none !important;
        -webkit-touch-callout: none !important;
        -webkit-user-select: text !important;
        user-select: text !important;
    }

    /* Asegurar que no haya formato de enlace */
    .form-group input[type="tel"]:link,
    .form-group input[type="tel"]:visited,
    .form-group input[type="tel"]:hover,
    .form-group input[type="tel"]:active {
        color: #000 !important;
        background: #fff !important;
        text-decoration: none !important;
    }
    
    /* Control específico para el campo de cédula */
    .form-group input[name="cedula"],
    .form-group #cedula,
    .form-group input[type="text"][placeholder*="cédula"],
    .form-group input[type="text"][placeholder*="Cédula"] {
        background: #fff !important;
        background-image: none !important;
        -webkit-background-clip: unset !important;
        background-clip: unset !important;
        color: black !important;
        position: relative !important;
        z-index: 2 !important;
    }

    /* Eliminar cualquier contenido generado */
    .form-group input[name="cedula"]::before,
    .form-group input[name="cedula"]::after,
    .form-group #cedula::before,
    .form-group #cedula::after {
        content: none !important;
        display: none !important;
        font-size: 0 !important;
        opacity: 0 !important;
        visibility: hidden !important;
    }

    /* Ocultar cualquier texto de fondo o marca de agua */
    .form-group input[name="cedula"]::-webkit-input-placeholder,
    .form-group #cedula::-webkit-input-placeholder {
        color: transparent !important;
        font-size: 0 !important;
        opacity: 0 !important;
    }
    
    /* Forzar fondo limpio */
    .form-group input[name="cedula"],
    .form-group #cedula {
        background-color: #fff !important;
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
        -webkit-backdrop-filter: none !important;
        backdrop-filter: none !important;
        isolation: isolate !important;
    }

    /* Ajustes específicos para Chrome */
    @media screen and (-webkit-min-device-pixel-ratio:0) {
        .form-group input,
        .form-group select,
        .form-group textarea {
            line-height: 16px !important;
            margin: 1px 0 !important;
        }
    }
    
    /* Específico para select - valores más legibles */
    .form-group select {
        font-size: 9.5pt !important;
        padding: 2px 1px !important;
        line-height: 1.2 !important;
        border: none !important;
        border-bottom: 1px solid #333 !important;
        font-weight: 500 !important;
        background: linear-gradient(to bottom, #fff 95%, #f8f8f8 100%) !important;
        position: relative !important;
    }
    
    .form-group select::after {
        content: "" !important;
        position: absolute !important;
        right: 5px !important;
        top: 50% !important;
        transform: translateY(-50%) !important;
        width: 0 !important;
        height: 0 !important;
        border-left: 4px solid transparent !important;
        border-right: 4px solid transparent !important;
        border-top: 4px solid #666 !important;
    }
    
    /* Campos especiales - alineación consistente */
    select#rutaTransporte,
    input[name="rutaTransporte"],
    #rutaTransporte,
    input[name="cedula"],
    #cedula,
    input[type="text"][placeholder*="cédula"],
    input[type="text"][placeholder*="Cédula"] {
        font-size: 9pt !important;
        white-space: nowrap !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
        height: 16px !important;
        min-height: 16px !important;
        max-height: 16px !important;
        padding: 1px 2px !important;
        width: 100% !important;
        border: none !important;
        border-bottom: 1px solid #444 !important;
        font-weight: normal !important;
        background: linear-gradient(to bottom, #fff 95%, #f9f9f9 100%) !important;
        margin: 0 !important;
        display: block !important;
        position: relative !important;
        vertical-align: bottom !important;
        line-height: 16px !important;
    }

    /* Alineación específica para campos de cédula y ruta */
    .form-group input[name="cedula"],
    .form-group #cedula,
    .form-group select#rutaTransporte,
    .form-group input[name="rutaTransporte"] {
        margin-top: 2px !important;
        margin-bottom: 0 !important;
        vertical-align: bottom !important;
    }

    /* Ajuste de etiquetas para estos campos */
    .form-group label[for="cedula"],
    .form-group label[for="rutaTransporte"] {
        margin-bottom: 2px !important;
        display: block !important;
        height: 8pt !important;
        line-height: 1 !important;
    }

    /* Limpiar fondo del campo de cédula */
    input[name="cedula"],
    #cedula,
    input[type="text"][placeholder*="cédula"],
    input[type="text"][placeholder*="Cédula"],
    input[type="text"][placeholder*="CÉDULA"] {
        background: white !important;
        background-image: none !important;
        -webkit-background-clip: unset !important;
        background-clip: unset !important;
        color: black !important;
        position: relative !important;
        z-index: 1 !important;
    }

    /* Asegurar que no haya contenido pseudo */
    input[name="cedula"]::before,
    input[name="cedula"]::after,
    #cedula::before,
    #cedula::after {
        content: none !important;
        display: none !important;
    }
    
    /* Textareas - más compactas */
    textarea {
        height: 18px !important;
        max-height: 18px !important;
        overflow: hidden !important;
        border: none !important;
        border-bottom: 1px solid #333 !important;
        line-height: 1.2 !important;
    }
    
    /* Declaración - más compacta y profesional */
    .declaration {
        padding: 3px 2px !important;
        text-align: center !important;
        margin: 3px 0 !important;
        border-top: 1.5px solid #000 !important;
        background: linear-gradient(to bottom, #fafafa 0%, #fff 100%) !important;
        box-shadow: inset 0 1px 0 rgba(255,255,255,0.9) !important;
    }
    
    .declaration p {
        font-weight: bold !important;
        margin: 0 !important;
        font-size: 9pt !important;
        letter-spacing: 0.4px !important;
        text-shadow: 0 0 0.3px rgba(0,0,0,0.1) !important;
        color: #111 !important;
    }
    
    /* Observaciones y fecha - optimizadas y mejoradas */
    .observaciones-fecha-container {
        display: flex !important;
        gap: 6px !important;
        margin-top: 5px !important;
        margin-bottom: 4px !important;
        padding: 3px !important;
        page-break-inside: avoid !important;
        border: 1px solid #333 !important;
        border-radius: 2px !important;
        background: linear-gradient(to bottom, #fff 0%, #fafafa 100%) !important;
    }
    
    .observaciones-grupo {
        flex: 2 !important;
        padding: 4px !important;
    }
    
    .observaciones-grupo label {
        font-weight: 600 !important;
        font-size: 8.5pt !important;
        margin-bottom: 3px !important;
        display: block !important;
        text-transform: uppercase !important;
        letter-spacing: 0.4px !important;
        color: #111 !important;
        text-shadow: 0 0 0.2px rgba(0,0,0,0.1) !important;
        border-bottom: 1px solid #666 !important;
        padding-bottom: 2px !important;
    }
    
    .observaciones-grupo textarea {
        width: 100% !important;
        min-height: 45px !important;
        border: 1px solid #ccc !important;
        border-radius: 2px !important;
        padding: 4px !important;
        font-size: 9pt !important;
        line-height: 1.3 !important;
        background: #fff !important;
        box-shadow: inset 0 1px 2px rgba(0,0,0,0.05) !important;
        resize: none !important;
        font-family: Arial, sans-serif !important;
    }

    /* Estilo para el texto de ayuda dentro del área de observaciones */
    .observaciones-grupo textarea::placeholder {
        font-style: italic !important;
        color: #666 !important;
        font-size: 8.5pt !important;
        opacity: 0.7 !important;
    }

    /* Mejora para el contenedor de texto de ayuda */
    .observaciones-help-text {
        font-size: 7pt !important;
        color: #666 !important;
        margin-top: 2px !important;
        font-style: italic !important;
        line-height: 1.2 !important;
    }
    
    /* Ocultar placeholder en impresión */
    .observaciones-grupo textarea::placeholder {
        color: transparent !important;
        opacity: 0 !important;
    }
    
    .fecha-grupo {
        flex: 1 !important;
        text-align: center !important;
        display: flex !important;
        flex-direction: column !important;
        align-items: center !important;
    }
    
    .fecha-grupo label {
        font-weight: 600 !important;
        font-size: 8pt !important;
        margin-bottom: 2px !important;
        text-transform: uppercase !important;
        letter-spacing: 0.3px !important;
    }
    
    .fecha-grupo input {
        border: none !important;
        border-bottom: 1.5px solid #333 !important;
        padding: 2px !important;
        font-size: 9.5pt !important;
        text-align: center !important;
        font-weight: 500 !important;
        background: linear-gradient(to bottom, #fff 95%, #f9f9f9 100%) !important;
        box-shadow: inset 0 -1px 0 rgba(0,0,0,0.05) !important;
        letter-spacing: 0.3px !important;
    }

    /* Ocultar elementos duplicados */
    .print-observaciones-fecha,
    .print-observaciones-container,
    .print-observaciones-grupo,
    .print-observaciones-label,
    .print-observaciones-linea,
    .print-fecha-grupo,
    .print-fecha-label,
    .print-fecha-valor {
        display: none !important;
    }
    
    /* ELEMENTOS DE FIRMA - texto debajo de la línea */
    .print-firmas {
        display: block !important;
        visibility: visible !important;
        margin-top: 30px !important;
    }
    
    .firma-container {
        display: flex !important;
        justify-content: space-between !important;
        width: 100% !important;
    }
    
    .firma-lado-izquierdo,
    .firma-lado-derecho {
        width: 48% !important;
    }
    
    .firma-linea {
        margin-bottom: 4px !important;
        text-align: center !important;
    }
    
    .firma-label {
        font-size: 7.5pt !important;
        font-weight: 600 !important;
        text-transform: uppercase !important;
        letter-spacing: 0.3px !important;
        display: block !important;
        margin-top: 3px !important;
    }
    
    .firma-linea-blanca {
        border-bottom: 1.5px solid #333 !important;
        height: 1px !important;
        width: 100% !important;
        margin-bottom: 0 !important;
        background: linear-gradient(to bottom, transparent 95%, #f5f5f5 100%) !important;
    }
    
    .firma-label {
        text-shadow: 0 0 0.5px rgba(0,0,0,0.1) !important;
    }
    
    /* Footer permanente - más compacto */
    .footer-permanent {
        display: block !important;
        visibility: visible !important;
        border-top: 1.5px solid #000 !important;
        margin-top: 4px !important;
        margin-bottom: 0 !important;
        padding: 3px 0 !important;
        text-align: center !important;
        page-break-inside: avoid !important;
        page-break-after: avoid !important;
        position: relative !important;
        bottom: 0 !important;
        clear: both !important;
        background: linear-gradient(to bottom, #fff 0%, #fafafa 100%) !important;
    }
    
    .footer-permanent p {
        font-size: 6.5pt !important;
        margin: 0 !important;
        padding: 0 !important;
        line-height: 1.15 !important;
        letter-spacing: 0.2px !important;
    }
    
    /* Reglas específicas para Chrome/Edge */
    @media screen and (-webkit-min-device-pixel-ratio:0) {
        @media print {
            .footer-permanent {
                position: relative !important;
                bottom: 0 !important;
                margin-bottom: 0 !important;
            }
            .footer-permanent::after {
                content: none !important;
                display: none !important;
            }
            body::after {
                content: none !important;
                display: none !important;
            }
            .container::after {
                content: none !important;
                display: none !important;
            }
        }
    }

    /* Prevenir página en blanco */
    @media print {
        html, body {
            height: 99% !important;
        }
        
        .container {
            page-break-after: avoid !important;
        }
        
        .matricula-form {
            page-break-after: avoid !important;
        }
        
        .form-section:last-child {
            page-break-after: avoid !important;
            margin-bottom: 0 !important;
        }
    }
}

/* Reglas específicas para Chrome para evitar página en blanco */
@media screen and (-webkit-min-device-pixel-ratio:0) {
    @media print {
        body {
            min-height: 0 !important;
            height: auto !important;
            position: relative !important;
        }
        .matricula-form::after {
            content: none !important;
        }
        .footer-permanent {
            position: relative !important;
            bottom: 0 !important;
            margin-bottom: 0 !important;
            padding-bottom: 0 !important;
        }
    }
}

/* Estilos específicos para Firefox */
@-moz-document url-prefix() {
    @media print {
        body {
            transform: scale(0.88);
            transform-origin: top center;
        }
        
        .form-group label {
            font-size: 8.5pt !important;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            font-size: 9pt !important;
        }
    }
}